{
  "version": 3,
  "sources": ["../src/plugin_three.mts"],
  "sourcesContent": ["export namespace THREENS {\n  export type EulerOrder = string\n  export type EulerArray = [number,number,number]|[number,number,number,EulerOrder]\n    interface RendererOptions {\n    antialias?: boolean\n    alpha?: boolean\n    canvas?: HTMLCanvasElement\n  }\n\n  export interface ArrowHelper extends LineSegments {\n    new (dir: Vector3, origin: Vector3, len: number, c: Color|number): ArrowHelper\n    setDirection (dir: Vector3): void\n  }\n  export interface AxesHelper extends LineSegments {\n    new (n: number): AxesHelper\n  }\n  interface AxisHelper extends LineSegments {\n    new (n: number): AxisHelper\n  }\n  interface BufferAttribute {\n    new (v: Float32Array, n: number): BufferAttribute\n    copyArray (a: number[]): void\n  }\n  export interface BufferGeometry {\n    new (): BufferGeometry\n    computeBoundingSphere (): void\n    dispose (): void\n    setAttribute (name: string, attr: BufferAttribute): void\n    setIndex(a: number[]): void\n  }\n  export interface Camera extends Object3D {\n    up: Vector3\n  }\n  export interface CameraHelper extends LineSegments {\n    new (c: Camera): CameraHelper\n    update (): void\n  }\n  export interface Color {\n    new (c: number): Color\n  }\n  export interface Controls {\n    enabled: boolean\n    new (c: Camera, e: Element): Controls\n    update (): void\n  }\n  export interface Disporsal {\n    dispose (): void\n  }\n  interface Euler {\n    new (): Euler\n    fromArray (a:[number,number,number]|[number,number,number,string]): void\n  }\n  interface Float32BufferAttribute extends BufferAttribute {\n    new (n: number, m: number): Float32BufferAttribute\n  }\n  export interface Fog {\n    new (c: number|Color, near?:number,far?: number): Fog\n  }\n  export interface FogExp2 {\n    new (c: number|Color,d?:number): FogExp2\n  }\n  export interface Group extends Object3D {\n    new (): Group\n  }\n  export interface Line extends Object3D {\n    new (g: BufferGeometry, m: Material): Line\n  }\n  interface LineSegments extends Line {\n    new (): LineSegments\n  }\n  interface LineBasicMaterial extends Material {\n    new (opt: any): LineBasicMaterial\n  }\n  interface Matrix3 {\n    new (): Matrix3\n  }\n  export interface Matrix4 {\n    new (): Matrix4    \n  }\n  interface Material {\n    dispose (): void\n  }\n  export interface Mesh extends Object3D {\n    geometry: BufferGeometry\n    material: Material\n  }\n  export interface Object3D {\n    new (): Object3D\n    children: Object3D[]\n    matrixWorld: Matrix4\n    position: Vector3\n    quaternion: Quaternion\n    rotation: Euler\n    scale: Vector3\n    visible: boolean\n    add (obj:Object3D|Object3D[]): void\n    applyMatrix3 (mat: Matrix3): void\n    applyMatrix4 (mat: Matrix4): void\n    applyQuaternion (q: Quaternion): void\n    getWorldDirection (v: Vector3): void\n    getWorldQuaternion (q: Quaternion): void\n    getWorldPosition (v: Vector3): void\n    lookAt(v: Vector3): void\n    remove (obj:Object3D|Object3D[]): void\n    toJSON (): string\n    translateOnAxis (axis: Vector3, distance: number): void\n  }\n  interface ObjectLoader {\n    new (): ObjectLoader\n    load (url: string, callback: (obj: Object3D) => void,\n                       progress: (xhr: XMLHttpRequest) => void,\n                       err: (xhr: XMLHttpRequest) => void): void\n  }\n  export interface OrbitControls extends Controls {\n    new (): OrbitControls\n  }\n  export interface PerspectiveCamera extends Camera {\n    aspect: number\n    far: number\n    focus: number\n    fov: number\n    near: number\n    zoom: number\n    new (w: number, raito: number, near: number, far: number): PerspectiveCamera\n  }\n  export interface Quaternion {\n    new (): Quaternion\n    new (x: number, y: number, z: number, w:number): Quaternion\n    angleTo (q: Quaternion): number\n    clone(): Quaternion\n    copy (q: Quaternion): void\n    multiply (q: Quaternion): void\n    set (x: number, y: number, z: number, w:number): void\n    setFromAxisAngle (v: Vector3, a: number): void\n    setFromEuler(e: Euler): void\n  }\n  export interface Renderer {\n    autoClear: boolean\n    domElement: Element\n    shadowMap: ShadowMap\n    new (): THREENS.Renderer\n    clear (): void\n    render (s: Scene, c: Camera): void\n    setClearColor (c: THREENS.Color|number, a?: number): void\n    setClearAlpha (a: number): void\n    setPixelRatio (ratio: number): void\n    setSize(w: number, h: number): void\n    getSize(rect: Vector2): void\n  }\n  export interface Scene extends Object3D {\n    new (): Scene\n    background: number|Color\n    fog: Fog\n  }\n  export interface ShadowMap {\n    enabled: boolean\n    new () : ShadowMap\n  }\n  export interface Vector2 {\n    width: number\n    height: number\n    new (): Vector2\n    new (x: number, y: number): Vector2\n    set (x: number, y: number): void\n  }\n  export interface Vector3 {\n    x: number\n    y: number\n    z: number\n    new (): Vector3\n    new (x: number, y: number, z: number): Vector3\n    add (v: Vector3): void\n    applyQuaternion(q: Quaternion): void\n    clone(): Vector3\n    copy (v: Vector3): void\n    multiplyScalar (n: number): void\n    normalize (): Vector3\n    set (x: number, y: number, z: number): void\n  }\n  export interface WebGLRenderer extends Renderer {\n    new (opt: RendererOptions): WebGLRenderer\n  }\n  export interface THREE {\n    ArrowHelper?: ArrowHelper\n    AxesHelper?: AxesHelper\n    AxisHelper?: AxisHelper\n    BufferAttribute: BufferAttribute\n    BufferGeometry: BufferGeometry\n    CameraHelper?: CameraHelper\n    Color: Color\n    Euler: Euler\n    Float32BufferAttribute: Float32BufferAttribute\n    Fog: Fog\n    FogExp2: FogExp2\n    Group: Group\n    Line: Line\n    LineBasicMaterial: LineBasicMaterial\n    LineSegments: LineSegments\n    Matrix3: Matrix3\n    Matrix4: Matrix4\n    Object3D: Object3D\n    ObjectLoader: ObjectLoader\n    OrbitControls?: OrbitControls\n    PerspectiveCamera: PerspectiveCamera\n    Quaternion: Quaternion\n    Renderer: Renderer\n    Scene: Scene\n    Vector2: Vector2\n    Vector3: Vector3\n    WebGLRenderer: WebGLRenderer\n  }\n}\n\nexport class ThreeUtil {\n  private static isDisporsal (obj: any): obj is THREENS.Disporsal {\n    return 'dispose' in obj && typeof obj['dispose'] === 'function'\n  }\n  private static isMesh (obj: THREENS.Object3D): obj is THREENS.Mesh {\n    return 'isMesh' in obj && obj['isMesh'] === true\n  }\n  static disposeChildObject (obj: THREENS.Object3D) {\n    while (obj.children.length > 0) {\n      this.disposeChildObject(obj.children[0])\n      obj.remove(obj.children[0])\n    }\n    if (ThreeUtil.isMesh(obj)) {\n      if (obj.geometry) { obj.geometry.dispose() }\n\n      if (obj.material) {\n        for (const propKey of Object.keys(obj.material)) {\n          const prop = (obj.material as {[key: string]: any} )[propKey] as any\n          if (ThreeUtil.isDisporsal(prop)) {\n            prop.dispose()\n          }\n        }\n        obj.material.dispose()\n      }\n    }\n  }\n}\n"],
  "mappings": "mBAqNO,IAAMA,EAAN,MAAMC,CAAU,CACrB,OAAe,YAAaC,EAAoC,CAC9D,MAAO,YAAaA,GAAO,OAAOA,EAAI,SAAe,UACvD,CACA,OAAe,OAAQA,EAA4C,CACjE,MAAO,WAAYA,GAAOA,EAAI,SAAc,EAC9C,CACA,OAAO,mBAAoBA,EAAuB,CAChD,KAAOA,EAAI,SAAS,OAAS,GAC3B,KAAK,mBAAmBA,EAAI,SAAS,CAAC,CAAC,EACvCA,EAAI,OAAOA,EAAI,SAAS,CAAC,CAAC,EAE5B,GAAID,EAAU,OAAOC,CAAG,IAClBA,EAAI,UAAYA,EAAI,SAAS,QAAQ,EAErCA,EAAI,UAAU,CAChB,QAAWC,KAAW,OAAO,KAAKD,EAAI,QAAQ,EAAG,CAC/C,IAAME,EAAQF,EAAI,SAAmCC,CAAO,EACxDF,EAAU,YAAYG,CAAI,GAC5BA,EAAK,QAAQ,CAEjB,CACAF,EAAI,SAAS,QAAQ,CACvB,CAEJ,CACF",
  "names": ["ThreeUtil", "_ThreeUtil", "obj", "propKey", "prop"]
}
